# Feature-Sliced Design (FSD)

**Feature-Sliced Design (FSD)** — это архитектурная методология для построения фронтенд-приложений. Она разделяет код на логически независимые слои, слайсы и сегменты, обеспечивая высокую связность (cohesion) и низкое зацепление (coupling). Этот подход помогает масштабировать приложения, улучшать читаемость и поддерживаемость кода.

## Структура слоев (Layers)

Проект, построенный на FSD, состоит из семи слоев (снизу вверх), каждый из которых отвечает за отдельную часть функциональности и взаимодействия. Слои стандартизированы и упорядочены вертикально, при этом модули могут взаимодействовать только с модулями, находящимися на более низких уровнях.

### 1. `shared` — Общие модули

- **Описание:** Этот слой содержит переиспользуемый код, который не привязан к бизнес-логике или специфике приложения. Здесь могут находиться такие вещи, как общие библиотеки, UI-компоненты, утилиты и API-клиенты.
- **Пример файловой структуры:**
  ```plaintext
  src/
  └── shared/
      ├── ui/
      │   └── Button/
      │       ├── Button.tsx
      │       └── index.ts
      ├── lib/
      │   └── formatDate.ts
      ├── api/
      │   └── httpClient.ts
      └── types/
          └── global.d.ts
  ```

### 2. `entities` — Бизнес-сущности

- **Описание:** Этот слой содержит модули, представляющие ключевые бизнес-сущности приложения. Это могут быть объекты, такие как пользователи, товары, заказы и т. д. Здесь хранятся модели данных и бизнес-логика для работы с этими сущностями.
- **Пример файловой структуры:**

```plaintext
src/
└── entities/
    └── User/
        ├── model/
        │   ├── store.ts
        │   └── actions.ts
        ├── api/
        │   └── fetchUser.ts
        └── ui/
            └── UserCard/
                ├── UserCard.tsx
                └── index.ts
```

### 3. `features` — Фичи (бизнес-функциональность)

- **Описание:** Этот слой содержит действия или взаимодействия с пользователем, которые несут бизнес-ценность. Это могут быть такие функции, как поиск пользователей, добавление товаров в корзину, отправка комментариев.
- **Пример файловой структуры:**

```plaintext
src/
└── features/
    └── AddToCart/
        ├── ui/
        │   └── AddToCartButton.tsx
        ├── model/
        │   └── actions.ts
        └── api/
            └── addToCart.ts
```

### 4. `widgets` — Виджеты (композиционные блоки)

- **Описание:** Виджеты представляют собой композицию из сущностей и фич для создания самостоятельных интерфейсных блоков. Они могут содержать в себе логику отображения, состояния и взаимодействий.
- **Пример файловой структуры:**

```plaintext
src/
└── widgets/
    └── UserProfile/
        ├── ui/
        │   └── UserProfileCard.tsx
        ├── model/
        │   └── store.ts
        └── lib/
            └── getUserDetails.ts
```

### 5. `pages` — Страницы

- **Описание:** Страницы — это композиционные слои, собирающие в себе виджеты, фичи и сущности для создания полноценной страницы приложения. Они могут включать в себя логику рендеринга страниц и маршрутизацию.
- **Пример файловой структуры:**

```plaintext
src/
└── pages/
    └── HomePage/
        ├── ui/
        │   └── HomePageLayout.tsx
        ├── model/
        │   └── fetchHomeData.ts
        └── widgets/
            └── UserProfile/
                └── index.ts
```

### 6. `processes` — Процессы

- **Описание:** Процессы включают в себя сложные сценарии, которые могут затрагивать несколько страниц или шагов в приложении. Это, например, авторизация, процесс заказа или заполнение формы регистрации.
- **Пример файловой структуры:**

```plaintext
src/
└── processes/
    └── AuthProcess/
        ├── ui/
        │   └── AuthForm.tsx
        ├── model/
        │   └── authStore.ts
        └── api/
            └── login.ts
```

### 7. `app` — Приложение

- **Описание:** Это глобальные настройки приложения, провайдеры и общие конфигурации, такие как стили, настройки роутинга и общие хуки.
- **Пример файловой структуры:**

```plaintext
src/
└── app/
    ├── providers/
    │   └── AppProvider.tsx
    ├── routes/
    │   └── index.tsx
    └── styles/
        └── global.css
```

## Слайсы (Slices)

Слайсы — это логические разделения внутри слоев. Слайс группирует модули по предметной области или функциональности. Например, для слоя `entities`, слайс может представлять определённую бизнес-сущность, такую как `User` или `Product`. Для слоя `features` слайс может представлять конкретную фичу, например, `AddToCart`.

**Пример:**

```plaintext
src/
└── entities/
    └── User/ <-- это слайс
        ├── model/
        ├── ui/
        └── api/
```

## Сегменты (Segments)

Сегменты — это модули, которые структурируют код внутри слайсов. Обычно используются следующие сегменты:

`ui` — компоненты пользовательского интерфейса.
`model` — состояние (`store`), действия и бизнес-логика.
`api` — функции для взаимодействия с сервером (например, `HTTP`-запросы).
`lib` — утилиты и вспомогательные функции, кастомные хуки.
`types` — описания типов (`TypeScript` интерфейсы и типы).
`config` — конфигурации (например, настройки для `UI` или `API`).

**Пример структуры с сегментами:**

```plaintext
src/
└── features/
    └── AddToCart/
        ├── ui/
        │   └── AddToCartButton.tsx
        ├── model/
        │   ├── store.ts
        │   └── actions.ts
        ├── api/
        │   └── addToCart.ts
        └── lib/
            └── calculateTotalPrice.ts
```

## Пример FSD-проекта в реальной жизни

Предположим, у нас есть интернет-магазин. В нём могут быть сущности, такие как `Product`, `User`, и фичи, такие как `AddToCart` или `PlaceOrder`. Эти фичи могут быть соединены в виджеты, такие как `ProductCard` или `OrderSummary`, которые далее собираются в страницы (`ProductPage`, `CheckoutPage`).

**Пример проектной структуры:**

```plaintext
src/
├── app/
│   └── providers/
├── shared/
│   ├── ui/
│   └── lib/
├── entities/
│   └── Product/
├── features/
│   └── AddToCart/
├── widgets/
│   └── ProductCard/
├── pages/
│   └── ProductPage/
├── processes/
│   └── CheckoutProcess/
```
