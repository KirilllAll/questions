# Каррирование

### Задача на умение писать каррирование

## Каррирование – продвинутая техника для работы с функциями. Она используется не только в JavaScript, но и в других языках.

### Каррирование – это трансформация функций таким образом, чтобы они принимали аргументы не как `f(a, b, c)`, а как `f(a)(b)(c)`

## Функция `curry` позволяет "каррировать" любую функцию.

Она преобразует функцию, которая принимает несколько аргументов, в последовательность вызовов функций с одним аргументом.

```javascript
function curry(fn) {
  return function curried(...args) {
    if (args.length >= fn.length) {
      return fn.call(this, ...args);
    }

    return curried.bind(this, ...args);
}
```

# Как работает каррирование

## Функция `curry`

`curry(fn)` преобразует функцию `fn`, которая принимает несколько аргументов, в функцию, которую можно вызывать последовательно с меньшим количеством аргументов за раз. Функция будет продолжать возвращать себя до тех пор, пока не соберет достаточное количество аргументов.

## Проверка количества аргументов

- Внутри функции `curried`, если количество переданных аргументов больше или равно количеству параметров исходной функции (`fn.length`), вызывается исходная функция с этими аргументами.
- Если аргументов недостаточно, функция возвращает новую версию самой себя, запоминая переданные аргументы через `bind`. Это позволяет постепенно передавать аргументы, пока их не наберется достаточно для выполнения функции.

## Преимущества каррирования

### Повышение гибкости

Каррированные функции можно вызывать с разным количеством аргументов. Это полезно, когда у вас есть цепочка вызовов, где значения могут поступать постепенно.

### Переиспользование

Каррирование позволяет создавать более специализированные версии функций, передавая один или несколько аргументов заранее.

### Пример:

```javascript
const add5 = curriedSum(5); // Создаем функцию, которая всегда добавляет 5
console.log(add5(3, 2)); // 10 (5 + 3 + 2)
console.log(add5(1)(4)); // 10 (5 + 1 + 4)
```

## Примеры из практики

### Фильтрация данных

```javascript
const filterByCategory = curry((category, products) =>
  products.filter((product) => product.category === category)
);

// Использование:
const filterElectronics = filterByCategory("electronics");
const filteredProducts = filterElectronics(productList);
```

### Настройка обработчиков событий

```javascript
const addEventListener = curry((eventType, element, handler) => {
  element.addEventListener(eventType, handler);
});

const addClickListener = addEventListener("click");

// Использование:
addClickListener(buttonElement, handleClick);
```

## Разбор примера функции

```javascript
function curry(fn) {
  // Возвращает функцию curried, которая может быть вызвана с любым количеством аргументов.
  return function curried(...args) {
    // Если передано достаточно аргументов (равно или больше количества параметров в исходной функции),
    // то выполняем оригинальную функцию с этими аргументами.
    if (args.length >= fn.length) {
      return fn.call(this, ...args); // Вызов функции с передачей всех аргументов.
    }
    // Если передано недостаточно аргументов, возвращаем новую функцию, которая будет ждать оставшиеся аргументы.
    return curried.bind(this, ...args); // Привязываем уже переданные аргументы.
  };
}
```
